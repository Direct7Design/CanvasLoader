(function(w){var k=function(b){this.init(b)},a=k.prototype,o,p=["canvas","vml"],h=["oval","spiral","square","rect","roundRect"],x=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,u=navigator.appVersion.indexOf("MSIE")!==-1&&parseFloat(navigator.appVersion.split("MSIE")[1])===8?true:false,y=!!document.createElement("canvas").getContext,m=function(b,d,a){var b=document.createElement(b),c;for(c in a)b[c]=a[c];typeof d!=="undefined"&&d.appendChild(b);return b},n=function(b,d){for(var a in d)b.style[a]=d[a];return b},
s=function(b,d){for(var a in d)b.setAttribute(a,d[a]);return b},t=function(b,d,a,c){b.save();b.translate(d,a);b.rotate(c);b.translate(-d,-a);b.beginPath()};a.init=function(b,d){try{this.mum=document.getElementById(b)!==void 0?document.getElementById(b):document.body}catch(a){this.mum=document.body}this.cont=m("div",this.mum,{id:typeof d!=="undefined"?d:"canvasLoader"});if(y)o=p[0],this.can=m("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=n(m("canvas",this.cont),{display:"none"}),
this.cCon=this.cCan.getContext("2d");else{o=p[1];if(typeof k.vmlSheet==="undefined"){document.getElementsByTagName("head")[0].appendChild(m("style"));k.vmlSheet=document.styleSheets[document.styleSheets.length-1];var c=["group","oval","roundrect","fill"],e;for(e in c)k.vmlSheet.addRule(c[e],"behavior:url(#default#VML); position:absolute;")}this.vml=m("group",this.cont)}this.setColor(this.color);this.ready=true;this.draw();this.show()};a.cont={};a.can={};a.con={};a.cCan={};a.cCon={};a.ready=false;
a.timer={};a.activeId=0;a.diameter=40;a.setDiameter=function(b){this.diameter=Math.round(Math.abs(b));this.redraw()};a.getDiameter=function(){return this.diameter};a.cRGB={};a.color="#000000";a.setColor=function(b){this.color=x.test(b)?b:"#000000";this.cRGB=this.getRGB(this.color);this.redraw()};a.getColor=function(){return this.color};a.shape=h[0];a.setShape=function(b){for(var d in h)if(b===h[d]){this.shape=b;this.redraw();break}};a.getShape=function(){return this.shape};a.density=40;a.setDensity=
function(b){this.density=Math.round(Math.abs(b));this.redraw()};a.getDensity=function(){return this.density};a.range=1.3;a.setRange=function(b){this.range=Math.abs(b);this.redraw()};a.getRange=function(){return this.range};a.speed=2;a.setSpeed=function(b){this.speed=Math.round(Math.abs(b));this.reset()};a.getSpeed=function(){return this.speed};a.fps=24;a.setFPS=function(b){this.fps=Math.round(Math.abs(b));this.reset()};a.getFPS=function(){return this.fps};a.getRGB=function(b){b=b.charAt(0)==="#"?
b.substring(1,7):b;return{r:parseInt(b.substring(0,2),16),g:parseInt(b.substring(2,4),16),b:parseInt(b.substring(4,6),16)}};a.draw=function(){var b=0,d,a,c,e,g,k,j,q=this.density,r=Math.round(q*this.range),l,i,v=0;i=this.cCon;var f=this.diameter;if(o===p[0]){i.clearRect(0,0,1E4,1E4);s(this.can,{width:f,height:f});for(s(this.cCan,{width:f,height:f});b<q;){l=b<=r?1-1/r*b:l=0;k=360-360/q*b;j=k/180*Math.PI;i.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+l.toString()+")";switch(this.shape){case h[0]:case h[1]:d=
f*0.07;e=f*0.5+Math.cos(j)*(f*0.5-d)-f*0.5;g=f*0.5+Math.sin(j)*(f*0.5-d)-f*0.5;i.beginPath();this.shape===h[1]?i.arc(f*0.5+e,f*0.5+g,d*l,0,Math.PI*2,false):i.arc(f*0.5+e,f*0.5+g,d,0,Math.PI*2,false);break;case h[2]:d=f*0.12;e=Math.cos(j)*(f*0.5-d)+f*0.5;g=Math.sin(j)*(f*0.5-d)+f*0.5;t(i,e,g,j);i.fillRect(e,g-d*0.5,d,d);break;case h[3]:case h[4]:a=f*0.3,c=a*0.27,e=Math.cos(j)*(c+(f-c)*0.13)+f*0.5,g=Math.sin(j)*(c+(f-c)*0.13)+f*0.5,t(i,e,g,j),this.shape===h[3]?i.fillRect(e,g-c*0.5,a,c):(d=c*0.7,i.moveTo(e+
d,g-c*0.5),i.lineTo(e+a-d,g-c*0.5),i.quadraticCurveTo(e+a,g-c*0.5,e+a,g-c*0.5+d),i.lineTo(e+a,g-c*0.5+c-d),i.quadraticCurveTo(e+a,g-c*0.5+c,e+a-d,g-c*0.5+c),i.lineTo(e+d,g-c*0.5+c),i.quadraticCurveTo(e,g-c*0.5+c,e,g-c*0.5+c-d),i.lineTo(e,g-c*0.5+d),i.quadraticCurveTo(e,g-c*0.5,e+d,g-c*0.5))}i.closePath();i.fill();i.restore();++b}}else{n(this.cont,{width:f,height:f});n(this.vml,{width:f,height:f});switch(this.shape){case h[0]:case h[1]:j="oval";d=140;break;case h[2]:j="roundrect";d=120;break;case h[3]:case h[4]:j=
"roundrect",d=300}a=c=d;e=500-c;for(g=-c*0.5;b<q;){l=b<=r?1-1/r*b:l=0;k=270-360/q*b;switch(this.shape){case h[1]:a=c=d*l;e=500-d*0.5-d*l*0.5;g=(d-d*l)*0.5;break;case h[0]:case h[2]:u&&(g=0,this.shape===h[2]&&(e=500-c*0.5));break;case h[3]:case h[4]:a=d*0.95,c=a*0.28,u?(e=0,g=500-c*0.5):(e=500-a,g=-c*0.5),v=this.shape===h[4]?0.6:0}i=s(n(m("group",this.vml),{width:1E3,height:1E3,rotation:k}),{coordsize:"1000,1000",coordorigin:"-500,-500"});i=n(m(j,i,{stroked:false,arcSize:v}),{width:a,height:c,top:g,
left:e});m("fill",i,{color:this.color,opacity:l});++b}}this.tick(true)};a.clean=function(){if(o===p[0])this.con.clearRect(0,0,1E4,1E4);else{var b=this.vml;if(b.hasChildNodes())for(;b.childNodes.length>=1;)b.removeChild(b.firstChild)}};a.redraw=function(){this.ready&&(this.clean(),this.draw())};a.reset=function(){typeof this.timer==="number"&&(this.hide(),this.show())};a.tick=function(b){var a=this.density,a=a>360?a/360:360/a,h=this.con,c=this.diameter;a*=this.speed;b||(this.activeId+=a);this.activeId>=
360&&(this.activeId-=360);o===p[0]?(h.clearRect(0,0,c,c),t(h,c*0.5,c*0.5,Math.PI/180*this.activeId),h.drawImage(this.cCan,0,0,c,c),h.restore()):n(this.vml,{rotation:this.activeId})};a.show=function(){if(typeof this.timer!=="number"){var a=this;this.timer=self.setInterval(function(){a.tick()},Math.round(1E3/this.fps));n(this.cont,{display:"block"})}};a.hide=function(){typeof this.timer==="number"&&(clearInterval(this.timer),delete this.timer,n(this.cont,{display:"none"}))};a.kill=function(){var a=
this.cont;typeof this.timer==="number"&&this.hide();o===p[0]?(a.removeChild(this.can),a.removeChild(this.cCan)):a.removeChild(this.vml);for(var d in this)delete this[d]};w.CanvasLoader=k})(window);